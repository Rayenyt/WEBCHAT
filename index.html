<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>InstaChat ðŸ’¬</title>
<style>
  body {
    margin: 0;
    font-family: "Poppins", sans-serif;
    background: radial-gradient(circle at top, #1e293b, #0f172a);
    color: white;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  header {
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(12px);
    padding: 15px 25px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 0 25px rgba(255,255,255,0.1);
    animation: fadeDown 0.6s ease;
  }
  header h1 {
    font-size: 1.3rem;
    background: linear-gradient(90deg,#ff4d6d,#f9a8d4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  #chat-box {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  .message {
    max-width: 70%;
    padding: 10px 15px;
    border-radius: 15px;
    word-wrap: break-word;
    position: relative;
    animation: fadeIn 0.3s ease;
  }
  .me {
    align-self: flex-end;
    background: linear-gradient(90deg, #ff4d6d, #f472b6);
    box-shadow: 0 0 15px rgba(255,77,109,0.5);
  }
  .other {
    align-self: flex-start;
    background: rgba(255,255,255,0.1);
    box-shadow: 0 0 15px rgba(255,255,255,0.1);
  }
  footer {
    display: flex;
    padding: 15px;
    background: rgba(255,255,255,0.03);
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(255,255,255,0.1);
  }
  input {
    flex: 1;
    padding: 10px 15px;
    border: none;
    border-radius: 12px;
    outline: none;
    background: rgba(255,255,255,0.1);
    color: white;
  }
  button {
    margin-left: 10px;
    padding: 10px 20px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: linear-gradient(90deg,#ff4d6d,#f9a8d4);
    color: white;
    font-weight: 600;
    box-shadow: 0 0 10px rgba(255,77,109,0.4);
    transition: 0.3s;
  }
  button:hover {
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(255,77,109,0.6);
  }
  @keyframes fadeIn {from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
  @keyframes fadeDown {from{opacity:0;transform:translateY(-15px);}to{opacity:1;transform:translateY(0);}}
</style>
</head>
<body>
  <header>
    <h1>InstaChat ðŸ’¬</h1>
    <span id="status">ðŸ”´ Offline</span>
  </header>
  <div id="chat-box"></div>
  <footer>
    <input id="msg" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." />
    <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
  </footer>

<script>
  const ws = new WebSocket("ws://localhost:3000"); // <-- Ø¹Ø¯Ù‘Ù„ Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø¹Ù†Ø¯ Ø±ÙØ¹Ù‡
  const chatBox = document.getElementById("chat-box");
  const status = document.getElementById("status");
  const msgInput = document.getElementById("msg");
  const username = prompt("ðŸ‘¤ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:");

  ws.onopen = () => status.textContent = "ðŸŸ¢ Online";
  ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    createMessage(`${data.user}: ${data.text}`, data.user === username ? "me" : "other");
  };
  ws.onclose = () => status.textContent = "ðŸ”´ Offline";

  function createMessage(text, type) {
    const div = document.createElement("div");
    div.className = `message ${type}`;
    div.textContent = text;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function sendMessage() {
    const text = msgInput.value.trim();
    if (!text) return;
    ws.send(JSON.stringify({ user: username, text }));
    msgInput.value = "";
  }

  msgInput.addEventListener("keypress", e => {
    if (e.key === "Enter") sendMessage();
  });
</script>
</body>
</html>
